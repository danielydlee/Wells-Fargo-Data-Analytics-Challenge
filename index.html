<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Wells Fargo Data Analytics Challenge by danielydlee</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Wells Fargo Data Analytics Challenge</h1>
          <h2>Class Group Project for DATA101 @ CofC</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/danielydlee/Wells-Fargo-Data-Analytics-Challenge/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/danielydlee/Wells-Fargo-Data-Analytics-Challenge/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/danielydlee/Wells-Fargo-Data-Analytics-Challenge" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="introduction-to-wells-fargo-data-analytics-challenge" class="anchor" href="#introduction-to-wells-fargo-data-analytics-challenge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction to Wells Fargo Data Analytics Challenge</h1>

<p>Dialogues on social media nowadays can provide tremendous insight into the behaviours, desires, pains, and thoughts of consumers. This project that our group worked on developed a repeatable process that identifies, classifies, and extracts the underlying drivers of consumer financial conversations and comments in social media data.</p>

<h2>
<a id="question-1-what-financial-topics-do-consumers-discuss-on-social-media-and-what-caused-the-consumers-to-post-about-this-topic" class="anchor" href="#question-1-what-financial-topics-do-consumers-discuss-on-social-media-and-what-caused-the-consumers-to-post-about-this-topic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Question #1: What financial topics do consumers discuss on social media and what caused the consumers to post about this topic?</h2>

<h3>
<a id="approach-and-methodology" class="anchor" href="#approach-and-methodology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Approach and Methodology</h3>

<p>Our team was given the data set from August 2015, and Facebook comments between Aug. 2014 and Aug. 2015 regarding the chosen banks across the industry from the data file given, and first analyzed its vocabulary frequency, 3,000 counts being the least amount of frequency. This process helped us to understand the general comments that were being said about the bank industry, including the ones involving four main banks. We also approached these tweets and Facebook comments by excerpting those which only involve our four main banks. We first split the tweets and comments by Bank A, B, C, D, trying to grasp the level of negativeness and positiveness of each bank by using the sentiment scoring algorithm which would provide a score for each tweets and comments between -10 and 10 with 0 being neutral. The tweets and Facebook comments that were split at the previous stage contained all different kinds of topics that were not financially related. Therefore, we now wanted to pick out tweets and comments that only take financial terms into account among them to comprehend how positively or negatively each bank was perceived by customers. We then used the same sentiment scoring algorithm method again on those financial related tweets and comments to score each bank according to the score on each tweets and comments.</p>

<h3>
<a id="the-data-and-its-relationship-to-social-conversation-drivers" class="anchor" href="#the-data-and-its-relationship-to-social-conversation-drivers" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Data and its Relationship to Social Conversation Drivers</h3>

<p>According to the data we have gathered from our approach and methodology, we could find several relationships between frequently used vocabulary and social conversation topics. Frequently used words such as “account”, “credit”, “finance”, “service” which will be thoroughly analyzed in the later stage of this report are great financially related indication of how the public perceives the bank industry or their specific bank on daily basis. The unconventional term like “GetCollegeReady”  that appears more than 3,000 times is also a great case of how these tweets and Facebook comments convey the social topic at the time. “GetCollegeReady” was one of four main banks’ subsidiary website with a purpose to better educate and engage students, parents, families, and high school counselors on best practices for planning and preparing for college. The site helps students understand how to pay for college, manage money, and build credit while in college taking into account a person’s full financial picture, including student loans, college credit cards, student checking and savings accounts, and student insurance. In an effort to amplify Get College Ready, the company leveraged a variety of its own social media channels and collaborate with nonprofit organizations using the hashtag #GetCollegeReady, which better explains why this term appeared on our dataset very frequently.  </p>

<h3>
<a id="code" class="anchor" href="#code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code</h3>

<p>Below are the codes that were used during our approach and methodology to sort and analyze the given dataset of tweets and Facebook comments:</p>

<ol>
<li>banksort() reads the contents of a text file, scans for Bank A,B,C,D,
and writes each entry to the appropriate output file.</li>
</ol>

<div class="highlight highlight-source-abl"><pre>def <span class="pl-c1"><span class="pl-c1">banksort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of a text file, scans for BankA,B,C,D,</span>
<span class="pl-s">    and writes the list item to the appropriate output</span>
<span class="pl-s">    file. </span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileName <span class="pl-k">=</span> <span class="pl-s">"DataSet.txt"</span>
    infile <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(infileName<span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    bankAoutfile <span class="pl-k">=</span> <span class="pl-s">"bankA.txt"</span>
    bankBoutfile <span class="pl-k">=</span> <span class="pl-s">"bankB.txt"</span>
    bankCoutfile <span class="pl-k">=</span> <span class="pl-s">"bankC.txt"</span>
    bankDoutfile <span class="pl-k">=</span> <span class="pl-s">"bankD.txt"</span>
    outfileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankAoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    outfileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankBoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    outfileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankCoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    outfileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankDoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)    
    <span class="pl-k">for</span> line in infile:
        <span class="pl-k">if</span> b<span class="pl-s">"BankA"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileA)
        elif b<span class="pl-s">"BankB"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileB)
        elif b<span class="pl-s">"BankC"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileC)
        elif b<span class="pl-s">"BankD"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileD)

    infile<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()</pre></div>

<ol>
<li>accountsort() reads the contents of the sorted bank files (A,B,C,D), scans
for the word 'account' and writes to the appropriate output file.</li>
</ol>

<div class="highlight highlight-source-abl"><pre>def <span class="pl-c1"><span class="pl-c1">accountsort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of the sorted bank files (A,B,C,D), scans</span>
<span class="pl-s">    for the word 'account' and writes to the appropriate output file.</span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    accountoutA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    accountoutB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    accountoutC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    accountoutD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    <span class="pl-k">for</span> line in infileA:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutA)
    <span class="pl-k">for</span> line in infileB:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutB)
    <span class="pl-k">for</span> line in infileC:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutC)
    <span class="pl-k">for</span> line in infileD:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutD)

    infileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()</pre></div>

<ol>
<li>score.sentiment() function uses laply() to iterate through the input text.
       It strips punctuation and control characters from each line using R’s regular
       expression-powered substitution function, gsub(), and uses match() against
       each word list to find matches</li>
</ol>

<div class="highlight highlight-source-r"><pre><span class="pl-v">score.sentiment</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">sentences</span>, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>)
{
  require(<span class="pl-smi">plyr</span>)
  require(<span class="pl-smi">stringr</span>)

  <span class="pl-c"># we got a vector of sentences. plyr will handle a list</span>
  <span class="pl-c"># or a vector as an "l" for us</span>
  <span class="pl-c"># we want a simple array of scores back, so we use</span>
  <span class="pl-c"># "l" + "a" + "ply" = "laply":</span>
  <span class="pl-v">scores</span> <span class="pl-k">=</span> laply(<span class="pl-smi">sentences</span>, <span class="pl-k">function</span>(<span class="pl-smi">sentence</span>, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>) {

    <span class="pl-c"># clean up sentences with R's regex-driven global substitute, gsub():</span>
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span>[[:punct:]]<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span>[[:cntrl:]]<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\\</span>d+<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-c"># and convert to lower case:</span>
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> tolower(<span class="pl-smi">sentence</span>)

    <span class="pl-c"># split into words. str_split is in the stringr package</span>
    <span class="pl-v">word.list</span> <span class="pl-k">=</span> str_split(<span class="pl-smi">sentence</span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\\</span>s+<span class="pl-pds">'</span></span>)
    <span class="pl-c"># sometimes a list() is one level of hierarchy too much</span>
    <span class="pl-v">words</span> <span class="pl-k">=</span> unlist(<span class="pl-smi">word.list</span>)

    <span class="pl-c"># compare our words to the dictionaries of positive &amp; negative terms</span>
    <span class="pl-v">pos.matches</span> <span class="pl-k">=</span> match(<span class="pl-smi">words</span>, <span class="pl-smi">pos.words</span>)
    <span class="pl-v">neg.matches</span> <span class="pl-k">=</span> match(<span class="pl-smi">words</span>, <span class="pl-smi">neg.words</span>)

    <span class="pl-c"># match() returns the position of the matched term or NA</span>
    <span class="pl-c"># we just want a TRUE/FALSE:</span>
    <span class="pl-v">pos.matches</span> <span class="pl-k">=</span> <span class="pl-k">!</span>is.na(<span class="pl-smi">pos.matches</span>)
    <span class="pl-v">neg.matches</span> <span class="pl-k">=</span> <span class="pl-k">!</span>is.na(<span class="pl-smi">neg.matches</span>)

    <span class="pl-c"># and conveniently enough, TRUE/FALSE will be treated as 1/0 by sum():</span>
    <span class="pl-v">score</span> <span class="pl-k">=</span> sum(<span class="pl-smi">pos.matches</span>) <span class="pl-k">-</span> sum(<span class="pl-smi">neg.matches</span>)

    <span class="pl-k">return</span>(<span class="pl-smi">score</span>)
  }, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span>.<span class="pl-smi">progress</span> )

  <span class="pl-v">scores.df</span> <span class="pl-k">=</span> <span class="pl-k">data.frame</span>(<span class="pl-v">score</span><span class="pl-k">=</span><span class="pl-smi">scores</span>, <span class="pl-v">text</span><span class="pl-k">=</span><span class="pl-smi">sentences</span>)
  <span class="pl-k">return</span>(<span class="pl-smi">scores.df</span>)
}</pre></div>

<h2>
<a id="question-2-are-the-topics-and-substance-consistent-across-the-industry-or-are-they-isolated-to-individual-banks" class="anchor" href="#question-2-are-the-topics-and-substance-consistent-across-the-industry-or-are-they-isolated-to-individual-banks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Question #2: Are the topics and “substance” consistent across the industry or are they isolated to individual banks?</h2>

<h3>
<a id="list-of-topics-and-substance" class="anchor" href="#list-of-topics-and-substance" aria-hidden="true"><span class="octicon octicon-link"></span></a>List of Topics and Substance</h3>

<p>First, we took a closer look at the overall trends of the given banks: A, B, C, and D. 
Starting with over 200,000 unique data entries at our fingertips, we needed to trim the data, but still observe all banks simultaneously before we start comparing them individually. With the help of RStudio, we were able to determine the most critical words that occurred with over 3,000 frequencies. We included all banks in this test, and by using this as our initial test, we were able to pinpoint what specific words were used the most frequently about all banks.
We then could easily observe overarching trends within the data set before we even began conducting any further testing on individual banking. By only pinpointing key words occurring more than 3,000 times, we were able to not only observe, but draw a few conclusions on what some of the most common words and topics actually were throughout the past year of data. 
<img src="http://i.imgur.com/XNMxXfY.png?1" alt=""></p>

<p>-Bank A's overall sentiment score
<img src="http://i.imgur.com/KAmzr8G.png?1" alt=""></p>

<p>-Bank A's sentiment score for the term 'account'
<img src="http://i.imgur.com/ktryqNm.png?1" alt=""></p>

<h3>
<a id="results-and-insights" class="anchor" href="#results-and-insights" aria-hidden="true"><span class="octicon octicon-link"></span></a>Results and Insights</h3>

<p>The overall sentiment levels for Banks A, B, C, D were fairly symmetrical, which was fairly surprising. We anticipated more variance within the sentiment levels of each of the banks, but, we came to find that all the banks in the overall sentiment level test were almost symmetric, or even a little skewed to the left. To our surprise, bank customers within the given data had an overall fair balance between positive and negative feedback via Facebook and Twitter. Bank D appeared to be the most symmetric of the banks in the overall sentiment level test comparison. But, there was not any drastic distinguishing jumps between the overall sentiment level comparisons worth noting. As aforementioned, although all banks appeared fairly symmetric, with a closer look, we saw there was a slight skewing to the left in all banks, but hardly enough to notice at first glance. This tells us that although all banks had quite a bit of both negative and positive feedback (fairly symmetric), the positive feedback won in the end by just nudge, which led the graphs to be slightly skewed left.</p>
        </section>

        <footer>
          Wells Fargo Data Analytics Challenge is maintained by <a href="https://github.com/danielydlee">danielydlee</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
